{% load static %}
{% get_static_prefix as STATIC_PREFIX %}

<!doctype html>
    <!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
    <!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
    <!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
    <!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
    <head>
        <title>MORElab project management</title>
        <link rel="shortcut icon" href="{{ STATIC_PREFIX }}img/favicon.ico">

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

        <meta name="description" content="">
        <meta name="author" content="">

        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="stylesheet" href="{{ STATIC_PREFIX }}css/bootstrap.css"/>
        <link rel="stylesheet" href="{{ STATIC_PREFIX }}css/bootstrap-responsive.css"/>
        <link rel="stylesheet" href="{{ STATIC_PREFIX }}css/style.css"/>
    </head>

    <body>

        <div id="main-container2" class="container">

        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->

        <div id="chart-div">
            <div id="chart_div" style="width: 675px; height: 375px;"></div>
        </div>

        <br>
        <div class="center">
            <a class="btn btn-inverse" href="{% url incomes_by_year_only year %}">Go back</a>
        </div>
        <br>

        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->

        </div>

    </body>

    <script type="text/javascript" src="https://www.google.com/jsapi"></script>

    <script>
        google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(drawChart);
        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Geographical scope', 'Incomes'],
                {% for project_income in project_incomes %}
                    ["{{ project_income.key }}", parseFloat({{ project_income.value }})],
                {% endfor %}
            ]);

            var options = {
                title: 'Income breakdown from {{ scope }} in the year {{ year }}',
                hAxis: {title: 'Geographical scope',  titleTextStyle: {color: 'black'}},
                vAxis: {title: 'Incomes in â‚¬',  titleTextStyle: {color: 'black'}},
            };

            // var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
            // var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
            var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
            chart.draw(data, options);
        }
    </script>

</html>
