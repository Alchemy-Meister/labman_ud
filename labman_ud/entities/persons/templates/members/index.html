{% extends "labman_ud/base.html" %}



{% block content %}

    <div class="pull-right">
        Filters:&emsp;
        <a href="{% url members_by_organization 'deustotech-internet' %}">
            <span class="label label-primary">DeustoTech - Internet</span>
        </a>
        &emsp;
        <a href="{% url members_by_organization 'deustotech-telecom' %}">
            <span class="label label-success">DeustoTech - Telecom</span>
        </a>
    </div>

    <br>

    <div class="centered">
        <h2>
            {{ members|length }} member{{ members|pluralize }}
            {% if organization %}
             in <em>'{{ organization.short_name }}'</em>
            {% endif %}
        </h2>
    </div>

    <br>

    <div class="row">
        {% for member in members %}

            {% if forloop.counter0|divisibleby:4 %}{% endif %}

                <div class="col-md-3 member" {% if forloop.counter0|divisibleby:4 %}style="margin-left:0;"{% endif %}>
                    <div class="centered">
                        <a href="{% url member_info member.slug %}">
                            {% if member.profile_picture_url %}
                                <img class="circular" src="{{ MEDIA_PREFIX }}{{ member.profile_picture_url }}"/>
                            {% else %}
                                {% if member.gender == 'Female' %}
                                    <img class="circular" src="{{ STATIC_PREFIX }}img/female.png"/>
                                {% else %}
                                    <img class="circular" src="{{ STATIC_PREFIX }}img/male.png"/>
                                {% endif %}
                            {% endif %}
                        </a>
                        <br>
                        <span class="member-name">{% if member.title %}{{member.title}} {% endif %}{{ member.full_name }}</span>
                        <br>
                        <span class="member-position">{{ member.position }}</span>
                        <br>
                        {% if member.company == 'DeustoTech - Internet' %}
                            <span class="label label-primary">{{ member.company }}</span>
                        {% endif %}

                        {% if member.company == 'DeustoTech - Telecom' %}
                            <span class="label label-success">{{ member.company }}</span>
                        {% endif %}
                    </div>
                </div>
        {% endfor %}
    </div>

    <div>
        <a class="btn btn-large btn-primary pull-right" href="{% url former_members %}">Former members</a>
    </div>

{% endblock %}



{% block scripts %}

    <script>
        $('#members-nav').addClass('active');
    </script>

    <script type="text/javascript" src="{{ STATIC_PREFIX }}js/konami.js"></script>

    <script type="text/javascript">
        var success = function() {
            var images = $("img.circular").map(function () { return this; });

            {% for member_konami_profile_picture in member_konami_profile_pictures %}
                $.each(images, function(i) {
                    if (i == {{ forloop.counter0 }}) {
                        if ("{{ member_konami_profile_picture|safe }}" != "") {
                            images[i].src = "{{ MEDIA_PREFIX }}/{{ member_konami_profile_picture|safe }}";
                        }

                        if (images[i].src.indexOf("/img/female.png") >= 0) {
                            images[i].src = "/static/img/lovelace.png";
                        }

                        if (images[i].src.indexOf("/img/male.png") >= 0) {
                            images[i].src = "/static/img/einstein.png";
                        }
                    };
                });
            {% endfor %}

            var positions = $(".member-position").map(function () { return this; });

            {% for konami_position in member_konami_positions %}
                $.each(positions, function(i) {
                    if (i == {{ forloop.counter0 }}) {
                        if ("{{ konami_position|safe }}" != "") {
                            positions[i].innerHTML = "{{ konami_position|safe }}";
                        }
                    };
                });
            {% endfor %}
        };

        var konami = new Konami(success);

    </script>

{% endblock %}
