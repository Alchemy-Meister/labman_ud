@prefix map: <#> .
@prefix db: <> .
@prefix vocab: <vocab/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix d2r: <http://sites.wiwiss.fu-berlin.de/suhl/bizer/d2r-server/config.rdf#> .
@prefix d2rq: <http://www.wiwiss.fu-berlin.de/suhl/bizer/D2RQ/0.1#> .
@prefix jdbc: <http://d2rq.org/terms/jdbc/> .

@prefix dc: <http://purl.org/dc/elements/1.1/> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix swrcfe: <http://www.morelab.deusto.es/ontologies/swrcfe.owl#> .

<> a d2r:Server;
    rdfs:label "SourcePlanet D2R Server";
    d2r:baseURI <http://dev.morelab.deusto.es/sourceplanet/d2r/>;
    d2r:port 2020;
    .

map:database a d2rq:Database;
    d2rq:jdbcDriver "org.postgresql.Driver";
    d2rq:jdbcDSN "jdbc:postgresql://localhost:5432/projects_morelab";
    d2rq:username "morelab";
    d2rq:password "morelab";
    .





###############################################################################
#   employee_manager: Employee
###############################################################################



# Table employee_manager_employee
map:Employee a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    d2rq:uriPattern "employee/@@employee_manager_employee.slug@@";
    d2rq:class swrcfe:Employee;
    d2rq:classDefinitionLabel "Employee";
    .
map:employee__label a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Employee;
    d2rq:property rdfs:label;
    d2rq:pattern "@@employee_manager_employee.name@@ @@employee_manager_employee.first_surname@@ @@employee_manager_employee.second_surname@@";
    .
map:employee_name a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Employee;
    d2rq:property foaf:name;
    d2rq:column "employee_manager_employee.name";
    .
map:employee_family_name a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Employee;
    d2rq:property foaf:familyName;
    d2rq:pattern "@@employee_manager_employee.first_surname@@ @@employee_manager_employee.second_surname@@";
    .
map:employee_foaf_link a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Employee;
    d2rq:property swrcfe:hasFOAF;
    d2rq:uriColumn "employee_manager_employee.foaf_link";
    .
map:employee_organization a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Employee;
    d2rq:property swrcfe:worksAt;
    d2rq:refersToClassMap map:Organization;
    d2rq:join "employee_manager_employee.organization_id => organization_manager_organization.id";
    .





###############################################################################
#   organization_manager: Organization
###############################################################################



# Table organization_manager_organization
map:Organization a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    d2rq:uriPattern "organization/@@organization_manager_organization.slug@@";
    d2rq:class swrcfe:Organization;
    .
map:organization__label a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Organization;
    d2rq:property rdfs:label;
    d2rq:pattern "@@organization_manager_organization.name@@";
    .
map:organization_name a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Organization;
    d2rq:property swrcfe:hasOrganizationName;
    d2rq:column "organization_manager_organization.name";
    .
map:organization_country a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Organization;
    d2rq:property swrcfe:hasCountry;
    d2rq:uriPattern "http://dbpedia.org/resource/Spain";
    d2rq:condition "organization_manager_organization.country = 'Spain'";
    .
map:organization_homepage a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Organization;
    d2rq:property swrcfe:hasOrganizationHomepage;
    d2rq:uriColumn "organization_manager_organization.homepage";
    .
map:organization_logo a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Organization;
    d2rq:property swrcfe:hasOrganizationLogo;
    d2rq:uriPattern "http://dev.morelab.deusto.es/sourceplanet/media/@@organization_manager_organization.logo@@";
    d2rq:condition "organization_manager_organization.logo is not null";
    .





###############################################################################
#   project_manager: AssignedEmployee
###############################################################################



## Table project_manager_assignedemployee
#map:project_manager_assignedemployee a d2rq:ClassMap;
#    d2rq:dataStorage map:database;
#    d2rq:uriPattern "project_manager_assignedemployee/@@project_manager_assignedemployee.id@@";
#    d2rq:class vocab:project_manager_assignedemployee;
#    d2rq:classDefinitionLabel "AssignedEmployee";
#    .
#map:project_manager_assignedemployee__label a d2rq:PropertyBridge;
#    d2rq:belongsToClassMap map:project_manager_assignedemployee;
#    d2rq:property rdfs:label;
#    d2rq:pattern "project_manager_assignedemployee #@@project_manager_assignedemployee.id@@";
#    .
##map:project_manager_assignedemployee_id a d2rq:PropertyBridge;
##    d2rq:belongsToClassMap map:project_manager_assignedemployee;
##    d2rq:property vocab:project_manager_assignedemployee_id;
##    d2rq:propertyDefinitionLabel "project_manager_assignedemployee id";
##    d2rq:column "project_manager_assignedemployee.id";
##    d2rq:datatype xsd:integer;
##    .
#map:project_manager_assignedemployee_role a d2rq:PropertyBridge;
#    d2rq:belongsToClassMap map:project_manager_assignedemployee;
#    d2rq:property vocab:assignedemployee_role;
#    d2rq:propertyDefinitionLabel "Role";
#    d2rq:column "project_manager_assignedemployee.role";
#    .
##map:project_manager_assignedemployee_employee_id__ref a d2rq:PropertyBridge;
##    d2rq:belongsToClassMap map:project_manager_assignedemployee;
##    d2rq:property vocab:employee_id;
##    d2rq:refersToClassMap map:employee_manager_employee;
##    d2rq:propertyDefinitionLabel "Employee";
##    d2rq:join "project_manager_assignedemployee.employee_id => employee_manager_employee.id";
##    .
##map:project_manager_assignedemployee_project_id__ref a d2rq:PropertyBridge;
##    d2rq:belongsToClassMap map:project_manager_assignedemployee;
##    d2rq:property vocab:project_manager_assignedemployee_project_id;
##    d2rq:refersToClassMap map:project_manager_project;
##    d2rq:join "project_manager_assignedemployee.project_id => project_manager_project.id";
##    .

#
#
################################################################################
##   project_manager: ConsortiumMember
################################################################################

#
#
## Table project_manager_consortiummember
#map:project_manager_consortiummember a d2rq:ClassMap;
#    d2rq:dataStorage map:database;
#    d2rq:uriPattern "project_manager_consortiummember/@@project_manager_consortiummember.id@@";
#    d2rq:class vocab:project_manager_consortiummember;
#    d2rq:classDefinitionLabel "ConsortiumMember";
#    .
#map:project_manager_consortiummember__label a d2rq:PropertyBridge;
#    d2rq:belongsToClassMap map:project_manager_consortiummember;
#    d2rq:property rdfs:label;
#    d2rq:pattern "project_manager_consortiummember #@@project_manager_consortiummember.id@@";
#    .
#map:project_manager_consortiummember_id a d2rq:PropertyBridge;
#    d2rq:belongsToClassMap map:project_manager_consortiummember;
#    d2rq:property vocab:project_manager_consortiummember_id;
#    d2rq:propertyDefinitionLabel "project_manager_consortiummember id";
#    d2rq:column "project_manager_consortiummember.id";
#    d2rq:datatype xsd:integer;
#    .
#map:project_manager_consortiummember_organization_id__ref a d2rq:PropertyBridge;
#    d2rq:belongsToClassMap map:project_manager_consortiummember;
#    d2rq:property vocab:project_manager_consortiummember_organization_id;
#    d2rq:refersToClassMap map:organization_manager_organization;
#    d2rq:join "project_manager_consortiummember.organization_id => organization_manager_organization.id";
#    .
#map:project_manager_consortiummember_project_id__ref a d2rq:PropertyBridge;
#    d2rq:belongsToClassMap map:project_manager_consortiummember;
#    d2rq:property vocab:project_manager_consortiummember_project_id;
#    d2rq:refersToClassMap map:project_manager_project;
#    d2rq:join "project_manager_consortiummember.project_id => project_manager_project.id";
#    .

#
#
################################################################################
##   project_manager: FundingAmount
################################################################################



# Table project_manager_fundingamount
map:FundingAmount a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    d2rq:uriPattern "funding_amount/@@project_manager_project.slug@@/@@project_manager_fundingamount.year@@";
    d2rq:class vocab:project_manager_fundingamount;
    d2rq:join "project_manager_fundingamount.project_id => project_manager_project.id";
    .
map:funding_amount__label a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:FundingAmount;
    d2rq:property rdfs:label;
    d2rq:pattern "@@project_manager_fundingamount.year@@'s funding amount for @@project_manager_project.title@@";
    d2rq:join "project_manager_fundingamount.project_id => project_manager_project.id";
    .
map:funding_amount_amount a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:FundingAmount;
    d2rq:property vocab:project_manager_fundingamount_amount;
    d2rq:column "project_manager_fundingamount.amount";
    d2rq:datatype xsd:decimal;
    .
map:funding_amount_year a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:FundingAmount;
    d2rq:property vocab:project_manager_fundingamount_year;
    d2rq:column "project_manager_fundingamount.year";
    d2rq:datatype xsd:gYear;
    .
map:funding_amount_project_id__ref a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:FundingAmount;
    d2rq:property vocab:project_manager_fundingamount_project_id;
    d2rq:refersToClassMap map:Project;
    d2rq:join "project_manager_fundingamount.project_id => project_manager_project.id";
    .





################################################################################
##   project_manager: FundingProgram
################################################################################



# Table project_manager_fundingprogram
map:FundingProgram a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    d2rq:uriPattern "project_manager_fundingprogram/@@project_manager_fundingprogram.id@@";
    d2rq:class vocab:project_manager_fundingprogram;
    .
map:funding_program__label a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:FundingProgram;
    d2rq:property rdfs:label;
    d2rq:pattern "project_manager_fundingprogram #@@project_manager_fundingprogram.id@@";
    .
map:funding_program_name a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:FundingProgram;
    d2rq:property vocab:project_manager_fundingprogram_name;
    d2rq:column "project_manager_fundingprogram.name";
    .
map:funding_program_project_code a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:FundingProgram;
    d2rq:property vocab:project_manager_fundingprogram_project_code;
    d2rq:column "project_manager_fundingprogram.project_code";
    .
map:funding_program_start_date a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:FundingProgram;
    d2rq:property vocab:project_manager_fundingprogram_start_month;
    d2rq:pattern "@@project_manager_fundingprogram.start_year@@-@@project_manager_fundingprogram.start_month@@";
    d2rq:datatype xsd:gYearMonth;
    .
map:funding_program_start_year a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:FundingProgram;
    d2rq:property vocab:project_manager_fundingprogram_start_year;
    d2rq:column "project_manager_fundingprogram.start_year";
    d2rq:datatype xsd:integer;
    .
map:funding_program_end_month a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:FundingProgram;
    d2rq:property vocab:project_manager_fundingprogram_end_month;
    d2rq:column "project_manager_fundingprogram.end_month";
    .
map:funding_program_end_year a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:FundingProgram;
    d2rq:property vocab:project_manager_fundingprogram_end_year;
    d2rq:column "project_manager_fundingprogram.end_year";
    d2rq:datatype xsd:integer;
    .
map:funding_program_concession_year a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:FundingProgram;
    d2rq:property vocab:project_manager_fundingprogram_concession_year;
    d2rq:column "project_manager_fundingprogram.concession_year";
    d2rq:datatype xsd:integer;
    .
map:funding_program_geographical_scope a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:FundingProgram;
    d2rq:property vocab:project_manager_fundingprogram_geographical_scope;
    d2rq:column "project_manager_fundingprogram.geographical_scope";
    .
map:funding_program_logo a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:FundingProgram;
    d2rq:property vocab:project_manager_fundingprogram_logo;
    d2rq:column "project_manager_fundingprogram.logo";
    .
map:funding_program_observations a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:FundingProgram;
    d2rq:property vocab:project_manager_fundingprogram_observations;
    d2rq:column "project_manager_fundingprogram.observations";
    .
map:funding_program_slug a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:FundingProgram;
    d2rq:property vocab:project_manager_fundingprogram_slug;
    d2rq:column "project_manager_fundingprogram.slug";
    .
map:funding_program_project_id__ref a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:FundingProgram;
    d2rq:property vocab:project_manager_fundingprogram_project_id;
    d2rq:refersToClassMap map:Project;
    d2rq:join "project_manager_fundingprogram.project_id => project_manager_project.id";
    .
map:funding_program_organization_id__ref a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:FundingProgram;
    d2rq:property vocab:project_manager_fundingprogram_organization_id;
    d2rq:refersToClassMap map:Organization;
    d2rq:join "project_manager_fundingprogram.organization_id => organization_manager_organization.id";
    .





################################################################################
##   project_manager: Project
################################################################################



# Table project_manager_project
map:Project a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    d2rq:uriPattern "project/@@project_manager_project.slug@@";
    d2rq:class swrcfe:Project;
    .
map:project__label a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Project;
    d2rq:property rdfs:label;
    d2rq:pattern "@@project_manager_project.title@@";
    .
map:project_type a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Project;
    d2rq:property rdfs:label;
    d2rq:column "project_manager_project.project_type";
    .
map:project_title a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Project;
    d2rq:property dc:title;
    d2rq:column "project_manager_project.title";
    .
map:project_description a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Project;
    d2rq:property dc:description;
    d2rq:column "project_manager_project.description";
    .
map:project_homepage a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Project;
    d2rq:property swrcfe:project_homepage;
    d2rq:uriColumn "project_manager_project.homepage";
    .
map:project_start_year a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Project;
    d2rq:property swrcfe:hasStartYear;
    d2rq:column "project_manager_project.start_year";
    d2rq:datatype xsd:gYear;
    .
map:project_end_year a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Project;
    d2rq:property swrcfe:hasEndYear;
    d2rq:column "project_manager_project.end_year";
    d2rq:datatype xsd:gYear;
    .
map:project_status a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Project;
    d2rq:property swrcfe:hasStatus;
    d2rq:column "project_manager_project.status";
    .
map:project_total_funds a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Project;
    d2rq:property swrcfe:hasTotalFunds;
    d2rq:column "project_manager_project.total_funds";
    d2rq:condition "project_manager_project.total_funds > 0";
    d2rq:datatype xsd:decimal;
    .
map:project_total_funds_deusto a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Project;
    d2rq:property swrcfe:hasTotalFundsDeusto;
    d2rq:column "project_manager_project.total_funds_deusto";
    d2rq:condition "project_manager_project.total_funds_deusto > 0";
    d2rq:datatype xsd:decimal;
    .
map:project_logo a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Project;
    d2rq:property swrcfe:hasProjectLogo;
    d2rq:uriPattern "http://dev.morelab.deusto.es/sourceplanet/media/@@project_manager_project.logo@@";
    d2rq:condition "project_manager_project.logo is not null";
    .
map:project_leader a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Project;
    d2rq:property swrcfe:hasProjectLeader;
    d2rq:refersToClassMap map:Organization;
    d2rq:join "project_manager_projectleader.organization_id => organization_manager_organization.id";
    d2rq:join "project_manager_projectleader.project_id => project_manager_project.id";
    .
map:project_consortium_member a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Project;
    d2rq:property swrcfe:hasConsortiumMember;
    d2rq:refersToClassMap map:Organization;
    d2rq:join "project_manager_consortiummember.organization_id => organization_manager_organization.id";
    d2rq:join "project_manager_consortiummember.project_id => project_manager_project.id";
    .
map:project_researcher a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Project;
    d2rq:property swrcfe:hasResearcher;
    d2rq:refersToClassMap map:Employee;
    d2rq:join "project_manager_assignedemployee.employee_id => employee_manager_employee.id";
    d2rq:join "project_manager_assignedemployee.project_id => project_manager_project.id";
    .
map:project_funding_amount a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Project;
    d2rq:property swrcfe:hasFundingAmount;
    d2rq:refersToClassMap map:FundingAmount;
    d2rq:join "project_manager_fundingamount.project_id => project_manager_project.id";
    .
map:project_funding_program a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:Project;
    d2rq:property swrcfe:hasFundingProgram;
    d2rq:refersToClassMap map:FundingProgram;
    d2rq:join "project_manager_fundingprogram.project_id => project_manager_project.id";
    .





################################################################################
##   project_manager: ProjectLeader
################################################################################



## Table project_manager_projectleader
#map:ProjectLeader a d2rq:ClassMap;
#    d2rq:dataStorage map:database;
#    d2rq:uriPattern "project_leader/@@project_manager_projectleader.id@@";
#    d2rq:class swrcfe:hasProjectLeader;
#    .
#map:project_leader__label a d2rq:PropertyBridge;
#    d2rq:belongsToClassMap map:ProjectLeader;
#    d2rq:property rdfs:label;
#    d2rq:pattern "project_manager_projectleader #@@project_manager_projectleader.id@@";
#    .
#map:project_leader_id a d2rq:PropertyBridge;
#    d2rq:belongsToClassMap map:ProjectLeader;
#    d2rq:property vocab:project_leader_id;
#    d2rq:column "project_manager_projectleader.id";
#    d2rq:datatype xsd:integer;
#    .
#map:project_leader_project_id__ref a d2rq:PropertyBridge;
#    d2rq:belongsToClassMap map:ProjectLeader;
#    d2rq:property vocab:projectleader_project_id;
#    d2rq:refersToClassMap map:Project;
#    d2rq:join "project_manager_projectleader.project_id => project_manager_project.id";
#    .
#map:project_leader_organization_id__ref a d2rq:PropertyBridge;
#    d2rq:belongsToClassMap map:ProjectLeader;
#    d2rq:property vocab:projectleader_organization_id;
#    d2rq:refersToClassMap map:Organization;
#    d2rq:join "project_manager_projectleader.organization_id => organization_manager_organization.id";
#    .
